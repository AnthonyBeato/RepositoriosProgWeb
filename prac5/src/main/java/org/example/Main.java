package org.example;

import io.javalin.Javalin;
import io.javalin.http.staticfiles.Location;
import io.javalin.websocket.WsConnectContext;
import org.example.BaseDatos.Bootstrap;
import org.example.controlador.*;
import org.example.encapsulacion.Comentario;
import org.example.encapsulacion.Foto;
import org.example.encapsulacion.Producto;
import org.example.encapsulacion.Usuario;
import org.example.servicios.ServiciosComentario;
import org.example.servicios.ServiciosFoto;
import org.example.servicios.ServiciosProducto;
import org.example.servicios.ServiciosUsuario;
import org.h2.engine.User;
import io.javalin.websocket.WsContext;

import java.util.Map;
import java.util.concurrent.ConcurrentHashMap;

import javax.persistence.EntityManager;
import javax.persistence.EntityManagerFactory;
import javax.persistence.Persistence;
import java.io.IOException;
import java.util.ArrayList;
import java.util.List;
import java.util.UUID;
//import jakarta.persistence.*;

import org.eclipse.jetty.websocket.api.Session;

public class Main {
    private static final Map<String, WsConnectContext> users = new ConcurrentHashMap<>();
    private static final List<WsContext> anonymousUsers = new ArrayList<>();
    private static String connectionMethod = "";


    public static void main(String[] args) throws IOException {

        //Configuraci√≥n de Hibernate
        EntityManagerFactory entityManagerFactory = Persistence.createEntityManagerFactory("MiUnidadPersistencia");
        EntityManager entityManager = entityManagerFactory.createEntityManager();


        Bootstrap.getInstance().init();

        ServiciosUsuario.getInstancia().crear(new Usuario("admin", "admin", "admin"));
        ServiciosUsuario.getInstancia().crear(new Usuario("Juan Peralta", "juanperalta", "1234"));
        ServiciosUsuario.getInstancia().crear(new Usuario("Pedro Ginebra", "pedroginebra", "1234"));

        for (int i = 0; i < 30; i++) {
            Producto producto = ServiciosProducto.getInstancia().crear(new Producto(UUID.randomUUID().toString(), "Product test no. "+i, 10, 1, "Descripcion no."+i, null, null));
            ServiciosFoto.getInstancia().crear(new Foto("photo-prueba"+i, "image/jpeg", "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", producto));
            ServiciosFoto.getInstancia().crear(new Foto("photo-prueba"+i, "image/jpeg", "iVBORw0KGgoAAAANSUhEUgAABkAAAASwCAIAAAAsYxHAAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoTWFjaW50b3NoKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpDRDUwNzI4MzQ0MkYxMUUzQUNCQUY2MkQwNzdCMEExMyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpDRDUwNzI4NDQ0MkYxMUUzQUNCQUY2MkQwNzdCMEExMyI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkNENTA3MjgxNDQyRjExRTNBQ0JBRjYyRDA3N0IwQTEzIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkNENTA3MjgyNDQyRjExRTNBQ0JBRjYyRDA3N0IwQTEzIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+9My/1AAAOONJREFUeNrs3V9o29fd+PH+HnYjdvEUxArfC19shSEYaBTRFTYQglGGCabqoIYUg2iKc+PiJJQUbIUQSmxBTUkj0ptkTTGEBrSLqYQQWG6EGYN2hIFgQwz2D19oDATdlW4f/eoH//RLG8Wx9ecj6fW6GE3qOOd7zleFvTnn+P/84Ac/eA4AAAAAovovUwAAAABAZAIWAAAAAKEJWAAAAACEJmABAAAAEJqABQAAAEBoAhYAAAAAoQlYAAAAAIQmYAEAAAAQmoAFAAAAQGgCFgAAAAChCVgAAAAAhCZgAQAAABCagAUAAABAaAIWAAAAAKEJWAAAAACEJmABAAAAEJqABQAAAEBoAhYAAAAAoQlYAAAAAIQmYAEAAAAQmoAFAAAAQGgCFgAAAAChCVgAAAAAhCZgAQAAABCagAUAAABAaAIWAAAAAKEJWAAAAACEJmABAAAAEJqABQAAAEBoAhYAAAAAoQlYAAAAAIQmYAEAAAAQmoAFAAAAQGgCFgAAAAChCVgAAAAAhCZgAQAAABCagAUAAABAaAIWAAAAAKEJWAAAAACEJmABAAAAEJqABQAAAEBoAhYAAAAAoQlYAAAAAIQmYAEAAAAQmoAFAAAAQGgCFgAAAAChCVgAAAAAhCZgAQAAABCagAUAAABAaAIWAAAAAKEJWAAAAACEJmABAAAAEJqABQAAAEBoAhYAAAAAoQlYAAAAAIQmYAEAAAAQmoAFAAAAQGgCFgAAAAChCVgAAAAAhCZgAQAAABCagAUAAABAaAIWAAAAAKEJWAAAAACEJmABAAAAEJqABQAAAEBoAhYAAAAAoQlYAAAAAIQmYAEAAAAQmoAFAAAAQGgCFgAAAAChCVgAAAAAhCZgAQAAABCagAUAAABAaAIWAAAAAKEJWAAAAACEJmABAAAAEJqABQAAAEBoAhYAAAAAoQlYAAAAAIQmYAEAAAAQmoAFAAAAQGgCFgAAAAChCVgAAAAAhCZgAQAAABCagAUAAABAaAIWAAAAAKEJWAAAAACEJmABAAAAEJqABQAAAEBoAhYAAAAAoQlYAAAAAIQmYAEAAAAQmoAFAAAAQGgCFgAAAAChCVgAAAAAhCZgAQAAABCagAUAAABAaAIWAAAAAKEJWAAAAACEJmABAAAAEJqABQAAAEBoAhYAAAAAoQlYAAAAAIQmYAEAAAAQmoAFAAAAQGgCFgAAAAChCVgAAAAAhCZgAQAAABCagAUAAABAaAIWAAAAAKEJWAAAAACEJmABAAAAEJqABQAAAEBoAhYAAAAAoQlYAAAAAIQmYAEAAAAQmoAFAAAAQGgCFgAAAAChCVgAAAAAhCZgAQAAABCagAUAAABAaAIWAAAAAKEJWAAAAACEJmABAAAAEJqABQAAAEBoAhYAAAAAoQlYAAAAAIQmYAEAAAAQmoAFAAAAQGgCFgAAAAChCVgAAAAAhCZgAQAAABCagAUAAABAaAIWAAAAAKEJWAAAAACEJmABAAAAEJqABQAAAEBoAhYAAAAAoQlYAAAAAIQmYAEAAAAQmoAFAAAAQGgCFgAAAAChCVgAAAAAhCZgAQAAABCagAUAAABAaAIWAAAAAKEJWAAAAACEJmABAAAAEJqABQAAAEBoAhYAAAAAoQlYAAAAAIQmYAEAAAAQmoAFAAAAQGgCFgAAAAChCVgAAAAAhCZgAQAAABCagAUAAABAaAIWAAAAAKEJWAAAAACEJmABAAAAEJqABQAAAEBoAhYAAAAAoQlYAAAAAIQmYAEAAAAQmoAFAAAAQGgCFgAAAAChCVgAAAAAhCZgAQAAABCagAUAAABAaAIWAAAAAKEJWAAAAACEJmABAAAAEJqABQAAAEBoAhYAAAAAoQlYAAAAAIQmYAEAAAAQmoAFAAAAQGgCFgAAAAChCVgAAAAAhCZgAQAAABCagAUAAABAaAIWAAAAAKEJWAAAAACEJmABAAAAEJqABQAAAEBoAhYAAAAAoQlYAAAAAIQmYAEAAAAQmoAFAAAAQGgCFgAAAAChCVgAAAAAhCZgAQAAABCagAUAAABAaAIWAAAAAKEJWAAAAACEJmABAAAAEJqABQAAAEBoAhYAAAAAoQlYAAAAAIQmYAEAAAAQmoAFAAAAQGgCFgAAAAChCVgAAAAAhCZgAQAAABCagAUAAABAaAIWAAAAAKEJWAAAAACEJmABAAAAEJqABQAAAEBoAhYAAAAAoQlYAAAAAIQmYAEAAAAQmoAFAAAAQGgCFgAAAAChCVgAAAAAhCZgAQAAABCagAUAAABAaAIWAAAAAKEJWAAAAACEJmABAAAAEJqABQAAAEBoAhYAAAAAoQlYAAAAAIQmYAEAAAAQmoAFAAAAQGgCFgAAAAChCVgAAAAAhCZgAQAAABCagAUAAABAaAIWAAAAAKEJWAAAAACEJmABAAAAEJqABQAAAEBoAhYAAAAAoQlYAAAAAIQmYAEAAAAQmoAFAAAAQGgCFgAAAAChCVgAAAAAhCZgAQAAABCagAUAAABAaAIWAAAAAKEJWAAAAACEJmABAAAAEJqABQAAAEBoAhYAAAAAoQlYAAAAAIQmYAEAAAAQmoAFAAAAQGgCFgAAAAChCVgAAAAAhCZgAQAAABCagAUAAABAaAIWAAAAAKEJWAAAAACEJmABAAAAEJqABQAAAEBoAhYAAAAAoQlYAAAAAIQmYAEAAAAQmoAFAAAAQGgCFgAAAAChCVgAAAAAhCZgAQAAABCagAUAAABAaAIWAAAAAKEJWAAAAACEJmABAAAAEJqABQAAAEBoAhYAAAAAoQlYAAAAAIQmYAEAAAAQmoAFAAAAQGgCFgAAAAChCVgAAAAAhCZgAQAAABCagAUAAABAaAIWAAAAAKEJWAAAAACEJmABAAAAEJqABQAAAEBoAhYAAAAAoQlYAAAAAIQmYAEAAAAQmoAFAAAAQGgCFgAAAAChCVgAAAAAhCZgAQAAABCagAUAAABAaAIWAAAAAKEJWAAAAACEJmABAAAAEJqABQAAAEBoAhYAAAAAoQlYAAAAAIQmYAEAAAAQmoAFAAAAQGgCFgAAAAChCVgAAAAAhCZgAQAAABCagAUAAABAaAIWAAAAAKEJWAAAAACEJmABAAAAEJqABQAAAEBoAhYAAAAAoQlYAAAAAIQmYAEAAAAQmoAFAAAAQGgCFgAAAAChCVgAAAAAhCZgAQAAABCagAUAAABAaAIWAAAAAKEJWAAAAACEJmABAAAAEJqABQAAAEBoAhYAAAAAoQlYAAAAAIQmYAEAAAAQmoAFAAAAQGgCFgAAAAChCVgAAAAAhCZgAQAAABCagAUAAABAaAIWAAAAAKEJWAAAAACEJmABAAAAEJqABQAAAEBoAhYAAAAAoQlYAAAAAIQmYAEAAAAQmoAFAAAAQGgCFgAAAAChCVgAAAAAhCZgAQAAABCagAUAAABAaAIWAAAAAKEJWAAAAACEJmABAAAAEJqABQAAAEBoAhYAAAAAoQlYAAAAAIQmYAEAAAAQmoAFAAAAQGgCFgAAAAChCVgAAAAAhCZgAQAAABCagAUAAABAaAIWAAAAAKEJWAAAAACEJmABAAAAEJqABQAAAEBoAhYAAAAAoQlYAAAA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AhYAAAAAaQIWAAAAAGkCFgAAAABpAhYAAAAAaQIWAAAAAGkCFgAAAABpAhYAAAAAaQIWAAAAAGkCFgAAAABpAhYAAAAAaQIWAAAAAGkCFgAAAABpAhYAAAAAaQIWAAAAAGkCFgAAAABpAhYAAAAAaQIWAAAAAGkCFgAAAABpAhYAAAAAaQIWAAAAAGkCFgAAAABpAhYAAAAAaQIWAAAAAGkCFgAAAABpAhYAAAAAaQIWAAAAAGkCFgAAAABpAhYAAAAAaQIWAAAAAGkCFgAAAABpAhYAAAAAaQIWAAAAAGkCFgAAAABpAhYAAAAAaQIWAAAAAGkCFgAAAABpAhYAAAAAaQIWAAAAAGkCFgAAAABpAhYAAAAAaQIWAAAAAGkCFgAAAABpAhYAAAAAaQIWAAAAAGkCFgAAAABpAhYAAAAAaQIWAAAAAGkCFgAAAABpAhYAAAAAaQIWAAAAAGkCFgAAAABpAhYAAAAAaQIWAAAAAGkCFgAAAABpAhYAAAAAaQIWAAAAAGkCFgAAAABpAhYAAAAAaQIWAAAAAGkCFgAAAABpAhYAAAAAaQIWAAAAAGkCFgAAAABpAhYAAAAAaQIWAAAAAGkCFgAAAABpAhYAAAAAaQIWAAAAAGkCFgAAAABpAhYAAAAAaQIWAAAAAGkCFgAAAABpAhYAAAAAaQIWAAAAAGkCFgAAAABpAhYAAAAAaQIWAAAAAGkCFgAAAABpAhYAAAAAaQIWAAAAAGkCFgAAAABpAhYAAAAAaQIWAAAAAGkCFgAAAABpAhYAAAAAaQIWAAAAAGkCFgAAAABpAhYAAAAAaQIWAAAAAGkCFgAAAABpAhYAAAAAaQIWAAAAAGkCFgAAAABpAhYAAAAAaQIWAAAAAGkCFgAAAABpAhYAAAAAaQIWAAAAAGkCFgAAAABpAhYAAAAAaQIWAAAAAGkCFgAAAABpAhYAAAAAaQIWAAAAAGkCFgAAAABpAhYAAAAAaQIWAAAAAGkCFgAAAABpAhYAAAAAaQIWAAAAAGkCFgAAAABpAhYAAAAAaQIWAAAAAGkCFgAAAABpAhYAAAAAaQIWAAAAAGkCFgAAAABpAhYAAAAAaQIWAAAAAGkCFgAAAABpAhYAAAAAaQIWAAAAAGkCFgAAAABpAhYAAAAAaQIWAAAAAGkCFgAAAABpAhYAAAAAaQIWAAAAAGkCFgAAAABpAhYAAAAAaQIWAAAAAGkCFgAAAABpAhYAAAAAaQIWAAAAAGkCFgAAAABpAhYAAAAAaQIWAAAAAGkCFgAAAABpAhYAAAAAaQIWAAAAAGkCFgAAAABpAhYAAAAAaQIWAAAAAGkCFgAAAABpAhYAAAAAaQIWAAAAAGkCFgAAAABpAhYAAAAAaQIWAAAAAGkCFgAAAABpAhYAAAAAaQIWAAAAAGkCFgAAAABpAhYAAAAAaQIWAAAAAGkCFgAAAABpAhYAAAAAaQIWAAAAAGkCFgAAAABpAhYAAAAAaQIWAAAAAGkCFgAAAABpAhYAAAAAaQIWAAAAAGkCFgAAAABpAhYAAAAAaQIWAAAAAGkCFgAAAABpAhYAAAAAaQIWAAAAAGkCFgAAAABpAhYAAAAAaQIWAAAAAGkCFgAAAABpAhYAAAAAaQIWAAAAAGkCFgAAAABpAhYAAAAAaQIWAAAAAGkCFgAAAABpAhYAAAAAaQIWAAAAAGkCFgAAAABpAhYAAAAAaQIWAAAAAGkCFgAAAABpAhYAAAAAaQIWAAAAAGkCFgAAAABpAhYAAAAAaQIWAAAAAGkCFgAAAABpAhYAAAAAaQIWAAAAAGkCFgAAAABpAhYAAAAAaQIWAAAAAGkCFgAAAABpAhYAAAAAaQIWAAAAAGkCFgAAAABpAhYAAAAAaQIWAAAAAGkCFgAAAABpAhYAAAAAaQIWAAAAAGkCFgAAAABpAhYAAAAAaQIWAAAAAGkCFgAAAABpAhYAAAAAaQIWAAAAAGkCFgAAAABpAhYAAAAAaQIWAAAAAGkCFgAAAABpAhYAAAAAaQIWAAAAAGkCFgAAAABpAhYAAAAAaQIWAAAAAGkCFgAAAABpAhYAAAAAaQIWAAAAAGkCFgAAAABpAhYAAAAAaQIWAAAAAGkCFgAAAABpAhYAAAAAaQIWAAAAAGkCFgAAAABpAhYAAAAAaQIWAAAAAGkCFgAAAABpAhYAAAAAaQIWAAAAAGkCFgAAAABpAhYAAAAAaQIWAAAAAGkCFgAAAABpAhYAAAAAaQIWAAAAAGkCFgAAAABpAhYAAAAAaQIWAAAAAGkCFgAAAABpAhYAAAAAaQIWAAAAAGkCFgAAAABpAhYAAAAAaQIWAAAAAGkCFgAAAABpAhYAAAAAaQIWAAAAAGkCFgAAAABpAhYAAAAAaQIWAAAAAGkCFgAAAABpAhYAAAAAaQIWAAAAAGkCFgAAAABpAhYAAAAAaQIWAAAAAGkCFgAAAABpAhYAAAAAaQIWAAAAAGkCFgAAAABpAhYAAAAAaQIWAAAAAGkCFgAAAABpAhYAAAAAaQIWAAAAAGkCFgAAAABpAhYAAAAAaQIWAAAAAGkCFgAAAABpAhYAAAAAaQIWAAAAAGkCFgAAAABpAhYAAAAAaQIWAAAAAGkCFgAAAABpAhYAAAAAaQIWAAAAAGkCFgAAAABpAhYAAAAAaQIWAAAAAGkCFgAAAABpAhYAAAAAaQIWAAAAAGkCFgAAAABpAhYAAAAAaQIWAAAAAGkCFgAAAABpAhYAAAAAaQIWAAAAAGkCFgAAAABpAhYAAAAAaQIWAAAAAGkCFgAAAABpAhYAAAAAaQIWAAAAAGkCFgAAAABpAhYAAAAAaQIWAAAAAGkCFgAAAABpAhYAAAAAaQIWAAAAAGkCFgAAAABpAhYAAAAAaQIWAAAAAGkCFgAAAABpAhYAAAAAaQIWAAAAAGkCFgAAAABpAhYAAAAAaQIWAAAAAGkCFgAAAABpAhYAAAAAaQIWAAAAAGkCFgAAAABpAhYAAAAAaQIWAAAAAGkCFgAAAABpAhYAAAAAaQIWAAAAAGkCFgAAAABpAhYAAAAAaQIWAAAAAGkCFgAAAABpAhYAAAAAaQIWAAAAAGkCFgAAAABpAhYAAAAAaQIWAAAAAGkCFgAAAABpAhYAAAAAaQIWAAAAAGkCFgAAAABpAhYAAAAAaQIWAAAAAGkCFgAAAABpAhYAAAAAaQIWAAAAAGkCFgAAAABpAhYAAAAAaQIWAAAAAGkCFgAAAABpAhYAAAAAaQIWAAAAAGkCFgAAAABpAhYAAAAAaQIWAAAAAGkCFgAAAABpAhYAAAAAaQIWAAAAAGkCFgAAAABpAhYAAAAAaQIWAAAAAGkCFgAAAABpAhYAAAAAaQIWAAAAAGkCFgAAAABpAhYAAAAAaQIWAAAAAGkCFgAAAABpAhYAAAAAaQIWAAAAAGkCFgAAAABpAhYAAAAAaQIWAAAAAGkCFgAAAABpAhYAAAAAaQIWAAAAAGkCFgAAAABpAhYAAAAAaQIWAAAAAGkCFgAAAABpAhYAAAAAaQIWAAAAAGkCFgAAAABpAhYAAAAAaQIWAAAAAGkCFgAAAABpAhYAAAAAaQIWAAAAAGkCFgAAAABpAhYAAAAAaQIWAAAAAGkCFgAAAABpAhYAAAAAaQIWAAAAAGkCFgAAAABpAhYAAAAAaQIWAAAAAGkCFgAAAABpAhYAAAAAaQIWAAAAAGkCFgAAAABpAhYAAAAAaQIWAAAAAGkCFgAAAABpAhYAAAAAaQIWAAAAAGkCFgAAAABpAhYAAAAAaQIWAAAAAGn/CjAAkpJLwHWB+vUAAAAASUVORK5CYII=", producto));
            ServiciosComentario.getInstancia().crear(new Comentario("Comentario no. 1 del producto test no. "+i, producto, ServiciosUsuario.getInstancia().getUsuariotByUser("juanperalta")));
            ServiciosComentario.getInstancia().crear(new Comentario("Comentario no. 2 del producto test no. "+i, producto, ServiciosUsuario.getInstancia().getUsuariotByUser("pedroginebra")));
            //System.out.println("Se creo el producto nombre: "+ producto.getNombre());
        }

        System.out.println("\t\tExisten: " + ServiciosProducto.getInstancia().findAll().size() + "productos");

        for (Producto producto:         ServiciosProducto.getInstancia().findAll()) {
            System.out.println("Producto nombre: "+ producto.getNombre());
        }

        //Configuraci√≥n de javalin
        Javalin app = Javalin.create(javalinConfig -> {
            javalinConfig.staticFiles.add(staticFileConfig -> {
                staticFileConfig.hostedPath = "/";
                staticFileConfig.directory = "/publico";
                staticFileConfig.location = Location.CLASSPATH;
                staticFileConfig.aliasCheck = null;
                staticFileConfig.precompress = false;
            });
        });



        //Controladoras:
        new ControllerSeguridad(app).aplicarDireccionamiento();
        new ControllerProducto(app).aplicarDireccionamiento();
        new ControllerCarritoCompras(app).aplicarDireccionamiento();
        new ControllerVentas(app).aplicarDireccionamiento();



        //Iniciar
        app.start(7001);

        entityManager.close();
        entityManagerFactory.close();

        app.ws("/ws", ws -> {
            ws.onConnect(ctx -> {
                System.out.println("Conexi√≥n entrante: " + ctx.getSessionId());
                String userId = getUserIdFromSession(ctx);
                if (userId != null) {
                    users.put(userId, ctx);
                } else {
                    anonymousUsers.add(ctx);
                }
                broadcastUserCount();
            });

            ws.onClose(ctx -> {
                System.out.println("Conexi√≥n cerrada: " + ctx.getSessionId());
                String userId = getUserIdFromSession(ctx);
                if (userId != null) {
                    users.remove(userId);
                } else {
                    anonymousUsers.remove(ctx);
                }
                broadcastUserCount();
            });

            ws.onError(ctx -> {
                System.out.println("Error en conexi√≥n: " + ctx.getSessionId());
                String userId = getUserIdFromSession(ctx);
                if (userId != null) {
                    users.remove(userId);
                }
            });
        });
    }

    private static String getUserIdFromSession(WsContext ctx) {
        Usuario usuario = ctx.sessionAttribute("usuario");
        if (usuario != null) {
            return usuario.getIdUsuario();
        }
        return null;
    }

    private static void broadcastUserCount() {
        int totalUsers = users.size() + anonymousUsers.size();
        String userCount = Integer.toString(totalUsers);

        users.values().forEach(user -> {
            if (user.session.isOpen()) {
                user.send(userCount);
            }
        });

        anonymousUsers.removeIf(user -> !user.session.isOpen());
        anonymousUsers.forEach(user -> {
            user.send(userCount);
        });
    }

    public static void broadcastMessage(String message) {
        users.values().forEach(user -> {
            if (user.session.isOpen()) {
                user.send(message);
            }
        });

        anonymousUsers.removeIf(user -> !user.session.isOpen());
        anonymousUsers.forEach(user -> {
            user.send(message);
        });
    }


    public static String getConnectionMethod(){
        return connectionMethod;
    }

}